!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function getData(){return{pressure:[1e3,990,980,970,960,950,940,930,920,910,900,890,880,870,860,850,840],altitude:[0,80.9705308,162.852307,245.694059,329.485335,414.246019,499.996631,586.758344,674.4897,763.115875,852.640464,942.952656,1034.00407,1125.84507,1218.44313,1311.81595,1405.99922],"sand-day":[285,284.2,283.4,282.5,281.7,280.9,280,279.2,278.3,277.4,276.5,275.5,274.8,274,273,272.2,271.3],"plowed-day":[283,282.2,281.4,280.5,279.7,278.9,278,277.2,277,276.8,276.5,275.5,274.8,274,273,272.2,271.3],"grass-day":[281,280.2,279.4,278.6,277.7,276.9,276.8,277.2,277,276.8,276.5,275.5,274.8,274,273,272.2,271.3],"snow-day":[273,273.2,273.4,273.7,274.6,275.9,276.8,277.2,277,276.8,276.5,275.5,274.8,274,273,272.2,271.3],"sand-night":[278.4,278.5,278.7,278.8,279.5,280.1,280,279.2,278.3,277.4,276.5,275.2,274.8,274,273,272.2,271.3],"plowed-night":[278.4,278.5,278.7,278.8,279.5,280.1,280,279.2,278.3,277.4,276.5,275.2,274.8274,273,272.2,271.3],"grass-night":[274.4,274.5,274.7,274.9,275.5,276.1,276.8,277.2,277,276.8,276.5,275.2,274.8,274,273,272.2,271.3],"snow-night":[268,270,271.8,273.2,274.6,275.9,276.8,277.2,277,276.8,276.5,275.5,274.8,274,273,272.2,271.3]}}function toFahrenheit(kelvin){return 9*(kelvin-273)/5+32}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=require("../utils");createjs.MotionGuidePlugin.install(),createjs.Sound.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin,createjs.FlashAudioPlugin]),createjs.Ticker.frameRate=30;var Trial=function(){function Trial(){_classCallCheck(this,Trial),this.start=null,this.surface="sand",this.time="day",this.temp=0,this.altitude=0,this.history=null}return _createClass(Trial,[{key:"init",value:function(start){this.start=start,this.surface=start.surface,this.time=start.time,this.temp=0,this.altitude=0,this.history=[]}},{key:"getCol",value:function(val){var v=val.toFixed(2),td=document.createElement("td");return td.appendChild(document.createTextNode(v)),td}},{key:"getColText",value:function(val){var td=document.createElement("td");return td.appendChild(document.createTextNode(val)),td}},{key:"addData",value:function(t,a){this.altitude=a/1e3,this.temp=toFahrenheit(t),this.history.push({temp:this.temp,altitude:this.altitude})}},{key:"getRow",value:function(){var tr=document.createElement("tr");tr.appendChild(this.getColText(this.start.surface)),tr.appendChild(this.getColText(this.start.time));for(var i=0;i<this.history.length;i+=2)tr.appendChild(this.getCol(this.history[i].temp)),tr.appendChild(this.getCol(this.history[i].altitude));return tr}}]),Trial}(),Image=function(){function Image(src){_classCallCheck(this,Image),this.day=new createjs.Bitmap(src),this.day.x=-1e3,this.day.y=0,this.night=new createjs.Bitmap(src),this.night.x=-1e3,this.night.y=0,this.night.filters=[new createjs.ColorFilter(1,1,1,1,-70,-70,-70)],this.night.cache(0,0,300,200)}return _createClass(Image,[{key:"show",value:function(time){"day"==time?this.day.x=0:this.night.x=0}},{key:"hide",value:function(){this.day.x=this.night.x=-1e3}}]),Image}(),Settings=function(){function Settings(){var _this=this;_classCallCheck(this,Settings),this.setValue(document.querySelector('input[name="choice"]:checked').value),this.listener=null;for(var radios=document.querySelectorAll('input[name="choice"]'),i=0;i<radios.length;i++)radios[i].addEventListener("change",function(e){_this.setValue(e.target.value),_this.listener&&_this.listener(_this.surface,_this.time)})}return _createClass(Settings,[{key:"setValue",value:function(value){this.value=value;var v=value.split("-");this.surface=v[0],this.time=v[1]}},{key:"getValue",value:function(){return this.value}},{key:"getSurface",value:function(){return this.surface}},{key:"getTime",value:function(){return this.time}},{key:"addListener",value:function(listener){this.listener=listener}}]),Settings}(),Buttons=function(){function Buttons(){_classCallCheck(this,Buttons),this.run=document.getElementById("run"),this.pause=document.getElementById("pause"),this.restart=document.getElementById("restart"),this.clear=document.getElementById("clear")}return _createClass(Buttons,[{key:"addListener",value:function(listener){this.run.addEventListener("click",function(e){return listener(e)}),this.pause.addEventListener("click",function(e){return listener(e)}),this.restart.addEventListener("click",function(e){return listener(e)}),this.clear.addEventListener("click",function(e){return listener(e)})}}]),Buttons}(),ATGraph=function(_Graph){function ATGraph(stage){_classCallCheck(this,ATGraph);var _this2=_possibleConstructorReturn(this,Object.getPrototypeOf(ATGraph).call(this,{stage:stage,w:200,h:200,xlabel:"Temperature(C)",ylabel:"Altitude(km)",xscale:"linear",yscale:"linear",minX:20,maxX:54,minY:0,maxY:1.5,majorX:4,minorX:1,majorY:.3,minorY:.1,precisionY:1}));return _this2.surface="sand",_this2.temp=0,_this2}return _inherits(ATGraph,_Graph),_createClass(ATGraph,[{key:"update",value:function(trial){this.plot(trial.temp,trial.altitude)}}]),ATGraph}(_utils.Graph),Rad=function(){function Rad(stage,settings,atgraph,finish){var _this3=this;_classCallCheck(this,Rad),this.stage=stage,this.settings=settings,this.atgraph=atgraph,this.finish=finish,this.images=[new Image("assets/desert.jpg"),new Image("assets/plowedfield.jpg"),new Image("assets/grassfield.jpg"),new Image("assets/snow.jpg")],this.lastImage=this.images[0],this.surfaces=["sand","plowed","grass","snow"],this.balloon=new createjs.Bitmap("assets/balloon.png"),this.balloon.x=150,this.balloon.y=160,this.balloon.scaleX=.1,this.balloon.scaleY=.1,this.baltween=null,this.path=[150,160,140,100,160,40,150,20,150,-20],this.data=getData(),this.lastIndex=0,this.colors={"sand-day":"#F3E5AB","plowed-day":"#966F33","grass-day":"#7Fe817","snow-day":"#FDEEF4","sand-night":"#FFD809","plowed-night":"#493D26","grass-night":"#667C26","snow-night":"#E3E4FA"},this.sun=(new createjs.Shape).set({x:320,y:20}),this.sun.graphics.beginFill("#FFFF00").drawCircle(0,0,10),this.moon=(new createjs.Shape).set({x:320,y:20}),this.moon.graphics.beginFill("#FFFFFF").drawCircle(0,0,10),this.results=document.getElementById("results_table"),this.trial=new Trial,this.settings.addListener(function(s,t){return _this3.changeSetting(s,t)})}return _createClass(Rad,[{key:"render",value:function(){this.addChildren(),this.changeSetting(this.settings.getSurface(),this.settings.getTime()),this.balloon.y=160}},{key:"addChildren",value:function(){var _this4=this;this.images.forEach(function(img){_this4.stage.addChild(img.day),_this4.stage.addChild(img.night)}),this.stage.addChild(this.balloon),this.stage.addChild(this.sun),this.stage.addChild(this.moon)}},{key:"changeSetting",value:function(surface,time){this.lastImage.hide(),this.lastImage=this.images[this.surfaces.indexOf(surface)],this.lastImage.show(time),this.showTime()}},{key:"showTime",value:function(){var path=[320,20,300,20,280,20];"day"==this.settings.getTime()?(this.moon.x=320,createjs.Tween.get(this.sun).to({guide:{path:path}},1e3).play()):(this.sun.x=320,createjs.Tween.get(this.moon).to({guide:{path:path}},1e3).play())}},{key:"clear",value:function(){this.stage.removeAllChildren(),this.render()}},{key:"play",value:function(){var _this5=this;this.surface=this.settings.getSurface(),this.time=this.settings.getTime(),this.trial.init({surface:this.surface,time:this.time,temp:20}),this.atgraph.setColor(this.colors[this.settings.getValue()]),this.baltween=createjs.Tween.get(this.balloon).to({guide:{path:this.path}},4e3),this.baltween.call(function(){_this5.running=!1,_this5.atgraph.endPlot(),_this5.results.appendChild(_this5.trial.getRow()),_this5.finish&&_this5.finish()}),this.running=!0,this.baltween.play()}},{key:"pause",value:function(_pause){this.baltween.setPaused(_pause),this.running=!_pause}},{key:"update",value:function(trial){for(var profile=this.data[this.settings.getValue()],alt=1500*(160-this.balloon.y)/160,i=0;alt>this.data.altitude[i];)i++;this.data.altitude[i]&&this.lastIndex!=i&&(this.lastIndex=i,this.trial.addData(profile[i],alt),this.atgraph.update(this.trial))}},{key:"newTrial",value:function(){this.trial=new Trial}},{key:"tick",value:function(atgraph){this.running===!0&&this.update(this.trial)}}]),Rad}(),RadSim=function(){function RadSim(){var _this6=this;_classCallCheck(this,RadSim),this.mainstage=new createjs.Stage("maincanvas"),this.atstage=new createjs.Stage("atgraph"),this.buttons=new Buttons,this.settings=new Settings,this.atgraph=new ATGraph(this.atstage),this.rad=new Rad(this.mainstage,this.settings,this.atgraph,function(){_this6.buttons.restart.disabled=!1,_this6.buttons.pause.disabled=!0}),this.rad.render(),this.pause=!1,this.buttons.addListener(function(e){switch(e.target.id){case"run":_this6.enablePlay(!1),_this6.buttons.pause.value="Pause",_this6.pause=!1,_this6.rad.play();break;case"pause":_this6.pause=!_this6.pause,_this6.mtn.pause(_this6.pause),e.target.value=_this6.pause?"Resume":"Pause";break;case"restart":_this6.reset(),_this6.rad.clear(),_this6.rad.newTrial();break;case"clear":_this6.atgraph.clear(),_this6.atgraph.render()}})}return _createClass(RadSim,[{key:"reset",value:function(){this.enablePlay(!0)}},{key:"enablePlay",value:function(play){this.buttons.run.disabled=!play,this.buttons.pause.disabled=play,this.buttons.restart.disabled=!play}},{key:"render",value:function(){var _this7=this;this.buttons.run.disabled=!1,this.buttons.pause.disabled=!0,this.buttons.restart.disabled=!0,this.atgraph.render(),this.rad.render(),createjs.Ticker.addEventListener("tick",function(e){_this7.rad.tick(_this7.atgraph),_this7.atstage.update(),_this7.mainstage.update()})}}]),RadSim}();(new RadSim).render()},{"../utils":4}],2:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0});var marginX=40,marginY=30;exports.Axis=function(){function Axis(spec){_classCallCheck(this,Axis),this.stage=spec.stage,this.w=spec.dim.w||100,this.h=spec.dim.h||100,this.min=spec.dim.min||0,this.max=spec.dim.max||100,this.font=spec.font||"12px Arial",this.color=spec.color||"#000",this.label=spec.label||"label",this.major=spec.major||10,this.minor=spec.minor||5,this.precision=spec.precision||0,this.vertical=spec.orient&&"vertical"==spec.orient||!1,this.linear=spec.scale&&"linear"==spec.scale||!1,this.originX=marginX,this.originY=this.h-marginY,this.scale=this.vertical?this.originY/(this.max-this.min):(this.w-this.originX)/(this.max-this.min)}return _createClass(Axis,[{key:"drawLine",value:function(x1,y1,x2,y2){var line=new createjs.Shape;line.graphics.setStrokeStyle(1),line.graphics.beginStroke(this.color),line.graphics.moveTo(x1,y1),line.graphics.lineTo(x2,y2),line.graphics.endStroke(),this.stage.addChild(line)}},{key:"drawText",value:function(text,x,y){return text.x=x,text.y=y,this.vertical&&text.text==this.label&&(text.rotation=270),this.stage.addChild(text),text}},{key:"getText",value:function(s){return new createjs.Text(s,this.font,this.color)}},{key:"render",value:function(){var label=this.getText(this.label),label_bnds=label.getBounds();if(this.vertical){this.drawLine(this.originX,this.originY,this.originX,0);var y=this.originY-(this.originY-label_bnds.width)/2;this.drawText(label,4,y);for(var val=this.min;val<=this.max;val+=this.major){var v=this.getLoc(val);this.drawLine(this.originX-3,v,this.originX+3,v);var text=this.getText(val.toFixed(this.precision)),bnds=text.getBounds();this.drawText(text,this.originX-5-bnds.width,v+bnds.height/2-10)}}else{this.drawLine(this.originX,this.originY,this.w,this.originY);var x=(this.w-label_bnds.width)/2;this.drawText(label,this.originX+x,this.originY+15);for(var val=this.min;val<=this.max;val+=this.major){var v=this.getLoc(val);this.drawLine(v,this.originY-3,v,this.originY+3);var text=this.getText(val.toFixed(this.precision)),bnds=text.getBounds();this.drawText(text,v-bnds.width/2,this.originY+4)}}}},{key:"getLoc",value:function(val){var ival=this.linear?Math.round(this.scale*(val-this.min)):Math.round(Math.log(this.scale*(val-this.min)));return this.vertical?this.originY-ival:this.originX+ival}},{key:"getValue",value:function(v){var factor=this.vertical?(this.h-(v-this.originY))/this.h:(v-this.originX)/this.w;return this.min+(this.max-this.min)*factor}},{key:"isInside",value:function(v){return this.vertical?v>=this.originY&&v<=this.originY+this.h:v>=this.originX&&v<=this.originY+this.w}}]),Axis}()},{}],3:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Graph=void 0;var _axis=require("./axis");exports.Graph=function(){function Graph(spec){_classCallCheck(this,Graph),this.stage=spec.stage,this.xaxis=new _axis.Axis({stage:this.stage,label:spec.xlabel,dim:{w:spec.w,h:spec.h,min:spec.minX,max:spec.maxX},orient:"horizontal",scale:spec.xscale,major:spec.majorX,minor:spec.minorX,precision:spec.precisionX}),this.yaxis=new _axis.Axis({stage:this.stage,label:spec.ylabel,dim:{w:spec.w,h:spec.h,min:spec.minY,max:spec.maxY},orient:"vertical",scale:spec.yscale,major:spec.majorY,minor:spec.minorY,precision:spec.precisionY}),this.last=null,this.point=!1,this.color="#000",this.marker=new createjs.Shape,this.marker.graphics.beginFill(this.color).drawRect(0,0,2,2),this.stage.addChild(this.marker)}return _createClass(Graph,[{key:"setMode",value:function(mode){this.point=mode,this.last=null}},{key:"setColor",value:function(color){this.color=color}},{key:"render",value:function(){this.xaxis.render(),this.yaxis.render()}},{key:"clear",value:function(){this.stage.removeAllChildren(),this.last=null}},{key:"moveMarker",value:function(x,y){this.marker.x=x-2,this.marker.y=y-2}},{key:"drawLine",value:function(x1,y1,x2,y2){var line=new createjs.Shape;line.graphics.setStrokeStyle(1),line.graphics.beginStroke(this.color),line.graphics.moveTo(x1,y1),line.graphics.lineTo(x2,y2),line.graphics.endStroke(),this.stage.addChild(line)}},{key:"plot",value:function(xv,yv){if(xv>=this.xaxis.min&&xv<=this.xaxis.max&&yv>=this.yaxis.min&&yv<=this.yaxis.max){var x=this.xaxis.getLoc(xv),y=this.yaxis.getLoc(yv);this.last?(this.moveMarker(this.last.x,this.last.y),this.point?this.drawLine(x,y,x,y):this.drawLine(this.last.x,this.last.y,x,y)):this.drawLine(x,y,x,y),this.last=new createjs.Point(x,y),this.moveMarker(x,y)}}},{key:"endPlot",value:function(){this.last=null}}]),Graph}()},{"./axis":2}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _graph=require("./graph");Object.defineProperty(exports,"Graph",{enumerable:!0,get:function(){return _graph.Graph}})},{"./graph":3}]},{},[1]);